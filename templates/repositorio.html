{% extends '/dashboard.html' %}
{% block titulo_pagina %}
    Repositorio
{% endblock %}

{% block contenido %}
<section class="questionnaires-section">
  <h3>Cuestionarios Públicos</h3>
  <div id="cuestionarios-lista" class="questionnaires-grid"></div>
</section>

<script>
  fetch('/cuestionarios_publicos')
    .then(r => r.json())
    .then(data => {
      const wrap = document.getElementById('cuestionarios-lista');
      if (!Array.isArray(data) || !data.length){
        wrap.innerHTML = '<p>No se encontraron cuestionarios públicos.</p>';
        return;
      }
      wrap.innerHTML = data.map(q => {
        const tipo = q.tipo_cuestionario === 'I' ? 'Individual' : 'Grupal';

        return `
          <article class="questionnaire-card">
            <div class="card-content">
              <h4 class="title">${q.nombre}</h4>
              <p class="subtitle">Docente: ${q.docente_completo}</p>
              <p class="meta">Tipo: ${tipo}</p>
              <p class="meta">PIN: ${q.pin}</p>
            </div>
          </article>
        `;
      }).join('');
    })
    .catch(e => console.error(e));
</script>
{% endblock %}
